# v1.3.0 功能演示指南

## 🎬 演示场景

本指南将演示v1.3.0的三大新功能，帮助您快速上手。

---

## 场景1：使用字段类型下拉选择配置协议

### 步骤

1. **启动程序**
   ```bash
   ./.qtcreator/Python_3_10_12venv/bin/python main_window.py
   ```

2. **进入协议配置Tab**
   - 点击第二个Tab "协议配置"

3. **添加新字段**
   - 点击"添加字段"按钮
   - 系统会在表格中新增一行

4. **编辑字段信息**
   - 字段名称：输入 "设备地址"
   - 字节数：输入 "1"
   - **数据类型：双击单元格** ⭐
   - 自动弹出下拉菜单
   - 选择 "uint8"
   - 说明：输入 "设备的唯一地址"

5. **验证效果**
   - 不再需要手动输入 "uint8"
   - 避免拼写错误（如 "unit8", "uint 8"）
   - 提高配置效率

### 预期结果

- ✅ 下拉菜单显示10种数据类型
- ✅ 点击即可选择，无需输入
- ✅ 配置速度明显提升

---

## 场景2：配置字段颜色并查看彩色分析结果

### 步骤1：配置颜色

1. **进入设置Tab**
   - 点击第四个Tab "设置"

2. **找到颜色配置分组**
   - 向下滚动到 "字段类型颜色配置" 分组
   - 看到10个字段类型，每个都有颜色按钮

3. **修改uint8颜色**
   - 点击 "uint8:" 旁边的颜色按钮（默认浅绿色）
   - 弹出颜色选择器对话框
   - 选择红色（RGB: 255, 0, 0）
   - 点击"确定"
   - 按钮颜色变为红色

4. **修改bytes颜色**
   - 点击 "bytes:" 旁边的颜色按钮
   - 选择亮黄色（RGB: 255, 255, 0）
   - 点击"确定"

5. **保存配置**
   - 颜色配置自动保存到 `~/.serialdatacompare/color_config.json`
   - 下次打开程序，颜色设置仍然保留

### 步骤2：分析数据查看彩色效果

6. **进入数据分析Tab**
   - 点击第一个Tab "数据分析"

7. **输入测试数据**
   ```
   68 01 83 05 11 22 33 44 55 E0 16
   ```

8. **点击"开始分析"**
   - 系统解析数据
   - 在表格中显示帧列表

9. **查看详细信息**
   - 点击表格中的第一帧
   - 在右侧详细信息区查看
   - **字段名以配置的颜色显示** ⭐
   - "设备地址" (uint8) 以红色背景显示
   - "数据内容" (bytes) 以黄色背景显示

10. **恢复默认颜色（可选）**
    - 回到设置Tab
    - 点击"恢复默认颜色"按钮
    - 所有颜色恢复为默认配色

### 预期结果

- ✅ 字段名显示彩色背景
- ✅ 不同类型一目了然
- ✅ 颜色可自定义
- ✅ 配置持久化保存

### 效果对比

**修改前（v1.2.1）：**
```
  设备地址: 1 (0x1)
  命令码: 131 (0x83)
  数据长度: 5 (0x5)
  数据内容: 11 22 33 44 55
```

**修改后（v1.3.0）：**
```html
  [设备地址](红色背景): 1 (0x1)
  [命令码](红色背景): 131 (0x83)
  [数据长度](红色背景): 5 (0x5)
  [数据内容](黄色背景): 11 22 33 44 55
```

---

## 场景3：查看分析历史记录

### 步骤1：进行多次分析

1. **第一次分析**
   - 输入数据：`68 01 83 05 11 22 33 44 55 E0 16`
   - 点击"开始分析"
   - 查看结果

2. **第二次分析**
   - 清空输入框
   - 输入数据：`68 02 84 03 AA BB CC D5 16`
   - 点击"开始分析"
   - 查看结果

3. **第三次分析**
   - 输入数据：`68 03 85 02 12 34 A9 16`
   - 点击"开始分析"

### 步骤2：查看历史记录

4. **打开历史记录对话框**
   - 点击"查看历史记录"按钮 ⭐
   - 弹出历史记录对话框

5. **浏览历史列表**
   - 上方表格显示所有历史记录
   - 列：时间、协议、总帧数、有效帧、错误帧、输入数据
   - 最新的记录在最上方

6. **查看详细信息**
   - 点击某条记录
   - 下方显示详细信息：
     - 分析时间：2025-11-01 10:30:45
     - 协议名称：工业设备协议
     - 总帧数：1
     - 有效帧：1
     - 错误帧：0
     - 输入数据：完整的输入内容
     - 帧摘要：每帧的状态和原始数据

7. **对比不同记录**
   - 点击另一条记录
   - 比较两次分析的差异

8. **清空历史（可选）**
   - 点击"清空历史"按钮
   - 确认删除所有记录

### 预期结果

- ✅ 所有分析自动保存
- ✅ 历史记录完整显示
- ✅ 可查看详细信息
- ✅ 支持对比分析
- ✅ 最多保存20条

### 应用场景

**场景A：追溯历史问题**
```
客户反馈昨天的数据有问题
→ 打开历史记录
→ 找到昨天的分析
→ 查看当时的输入和结果
→ 定位问题原因
```

**场景B：验证协议修改**
```
修改了协议配置
→ 用相同数据重新分析
→ 打开历史记录
→ 对比修改前后的结果
→ 验证修改是否正确
```

**场景C：数据趋势分析**
```
定期采集设备数据
→ 每次都进行分析
→ 历史记录保留所有结果
→ 观察数据变化趋势
→ 发现异常模式
```

---

## 🎯 完整工作流演示

### 场景：分析工业设备数据

**目标：** 解析和验证工业设备的串口通信数据

#### 第1步：配置协议

1. 进入"协议配置"Tab
2. 设置基本信息：
   - 协议名称："工业设备协议"
   - 版本："1.0"
   - 帧头：68
   - 帧尾：16

3. 配置字段（使用下拉选择）：
   - 设备地址 (1字节, **uint8** ⬇️)
   - 命令码 (1字节, **uint8** ⬇️)
   - 数据长度 (1字节, **uint8** ⬇️)
   - 数据内容 (5字节, **bytes** ⬇️)

4. 配置校验：
   - 类型：累加和
   - 位置：帧尾前
   - 起始偏移：0
   - 结束偏移：-1

5. 保存协议

#### 第2步：配置颜色

1. 进入"设置"Tab
2. 设置颜色：
   - uint8 → 绿色（地址、命令、长度）
   - bytes → 黄色（数据内容）

#### 第3步：分析数据

1. 进入"数据分析"Tab
2. 输入数据：
   ```
   68 01 83 05 11 22 33 44 55 E0 16
   68 02 84 03 AA BB CC D5 16
   68 03 85 02 12 34 A9 16
   ```

3. 点击"开始分析"
4. 查看结果：
   - 总帧数：3
   - 有效帧：3
   - 错误帧：0

5. 点击每一帧查看详细信息：
   - 字段以彩色显示 🎨
   - 绿色背景：设备地址、命令码、数据长度
   - 黄色背景：数据内容

#### 第4步：查看历史

1. 点击"查看历史记录"
2. 看到刚才的分析记录
3. 随时可以回顾

---

## 💡 使用技巧

### 技巧1：快速配置字段类型

```
✏️ 老方法：
1. 双击单元格
2. 手动输入 "uint16"
3. 可能输错成 "uint 16" 或 "unit16"

⭐ 新方法：
1. 双击单元格
2. 下拉菜单自动弹出
3. 点击选择 "uint16"
4. 绝不会出错！
```

### 技巧2：使用颜色突出重要字段

```
💡 建议配色方案：
- 地址类字段 → 绿色系（容易识别）
- 命令类字段 → 蓝色系（重要信息）
- 数据类字段 → 黄色系（主要内容）
- 校验类字段 → 红色系（验证信息）

这样在分析结果中，重要字段一目了然！
```

### 技巧3：利用历史记录调试协议

```
🔍 调试流程：
1. 配置协议v1，分析数据
2. 发现校验失败
3. 修改协议配置，分析同样数据
4. 打开历史记录，对比两次结果
5. 找出问题所在
6. 继续调整，直到成功

历史记录就像"撤销"功能，让你放心尝试！
```

---

## ❓ 常见问题

### Q1: 为什么字段类型没有颜色？
**A:** 需要先在"设置"Tab中配置颜色，然后重新分析数据才能看到效果。

### Q2: 历史记录可以保存多少条？
**A:** 最多20条，超过后自动删除最旧的记录。可以点击"清空历史"手动清除。

### Q3: 颜色配置会丢失吗？
**A:** 不会！颜色配置自动保存在 `~/.serialdatacompare/color_config.json`，下次打开程序仍然有效。

### Q4: 如何恢复默认颜色？
**A:** 在"设置"Tab点击"恢复默认颜色"按钮即可。

### Q5: 分析历史保存在哪里？
**A:** 保存在 `~/.serialdatacompare/analysis_history.json`，JSON格式，可以手动查看和编辑。

---

## 📸 截图说明

### 功能截图

1. **字段类型下拉选择**
   - 位置：协议配置Tab → 字段表格 → 数据类型列
   - 效果：双击单元格弹出下拉菜单

2. **颜色配置UI**
   - 位置：设置Tab → 字段类型颜色配置
   - 效果：10个颜色按钮，点击选择颜色

3. **彩色分析结果**
   - 位置：数据分析Tab → 帧详细信息
   - 效果：字段名显示彩色背景

4. **历史记录对话框**
   - 位置：数据分析Tab → 点击"查看历史记录"
   - 效果：表格显示所有历史，下方显示详细信息

---

## 🎬 视频演示脚本

### 2分钟演示视频脚本

**00:00-00:15** 开场介绍
- "大家好，今天演示串口数据分析工具v1.3.0的三大新功能"

**00:15-00:45** 功能1：字段类型下拉选择
- 打开协议配置Tab
- 双击数据类型列，展示下拉菜单
- 选择uint16，说明"再也不用担心拼写错误"

**00:45-01:15** 功能2：字段彩色显示
- 进入设置Tab，展示颜色配置
- 修改uint8为红色
- 分析数据，展示彩色效果
- 说明"不同字段类型一目了然"

**01:15-01:45** 功能3：分析历史记录
- 进行几次分析
- 打开历史记录对话框
- 查看详细信息
- 说明"随时追溯历史分析"

**01:45-02:00** 结尾
- "三大新功能，让数据分析更高效！"
- "感谢观看！"

---

## 📝 演示检查清单

准备演示前，请确认：

- [ ] 程序可以正常启动
- [ ] 已有测试协议文件
- [ ] 已准备测试数据
- [ ] 颜色配置已初始化
- [ ] 历史记录已清空（演示从零开始）
- [ ] 已阅读本演示指南
- [ ] 熟悉所有操作步骤

---

**准备好了吗？开始你的v1.3.0之旅吧！** 🚀
