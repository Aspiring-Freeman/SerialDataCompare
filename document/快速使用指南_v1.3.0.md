# 串口数据分析工具 v1.3.0 - 快速使用指南

## 🎉 新功能速览

本版本新增了三大实用功能：
1. **字段类型下拉选择** - 不再需要手动输入，避免拼写错误
2. **彩色字段显示** - 可自定义每种字段类型的颜色，结果一目了然
3. **分析历史记录** - 自动保存分析结果，随时查看历史

---

## 🚀 快速开始

### 启动程序

```bash
cd /home/noah/Program/Python_software/SerialDataCompare/SerialDataCompare
./.qtcreator/Python_3_10_12venv/bin/python main_window.py
```

---

## 📋 功能使用

### 1. 字段类型下拉选择

**位置：** 协议配置 Tab

**步骤：**
1. 在字段表格中，双击"数据类型"列
2. 自动弹出下拉菜单
3. 选择你需要的类型：
   - 整数：uint8, uint16, uint32, int8, int16, int32
   - 浮点：float, double
   - 其他：bytes, string

**优势：**
- ✅ 不会输入错误的类型名
- ✅ 快速选择，提高效率
- ✅ 显示所有可用类型

---

### 2. 彩色字段显示

**位置：** 设置 Tab → 字段类型颜色配置

**配置颜色：**
1. 找到"字段类型颜色配置"分组
2. 点击字段类型旁边的颜色按钮
3. 在颜色选择器中选择新颜色
4. 点击"确定"保存

**重置颜色：**
- 点击"恢复默认颜色"按钮恢复所有默认颜色

**查看效果：**
- 进行数据分析后
- 在帧详细信息中，每个字段名会显示对应的背景色
- 不同类型的字段颜色不同，快速识别

**默认颜色：**
| 类型 | 颜色 | 说明 |
|-----|------|------|
| uint8/int8 | 绿色系 | 1字节整数 |
| uint16/int16 | 蓝色系 | 2字节整数 |
| uint32/int32 | 紫色系 | 4字节整数 |
| float/double | 粉红色系 | 浮点数 |
| bytes | 黄色 | 字节数组 |
| string | 灰色 | 字符串 |

---

### 3. 分析历史记录

**自动保存：**
- 每次点击"开始分析"并完成后，自动保存到历史记录
- 无需手动操作

**查看历史：**
1. 点击"查看历史记录"按钮
2. 在弹出的对话框中：
   - 表格显示所有历史记录（时间、协议、统计）
   - 点击某条记录查看详细信息
   - 包括：输入数据、帧摘要、错误状态

**清空历史：**
- 在历史记录对话框中点击"清空历史"
- 确认后删除所有记录

**历史容量：**
- 最多保存 20 条记录
- 超过后自动删除最旧的记录

---

## 💡 使用技巧

### 技巧1：快速配置协议

```
1. 使用下拉选择快速设置字段类型
2. 避免手动输入导致的错误
3. 保存协议后可重复使用
```

### 技巧2：定制显示风格

```
1. 根据个人喜好配置颜色
2. 重要字段使用醒目颜色（如红色）
3. 相似字段使用相近颜色
```

### 技巧3：利用历史记录

```
1. 对比不同时间的分析结果
2. 追溯历史问题
3. 验证协议修改效果
```

---

## 🔧 配置文件位置

所有配置自动保存在：
```
~/.serialdatacompare/
├── protocol_history.json      # 协议历史
├── analysis_history.json      # 分析历史
└── color_config.json          # 颜色配置
```

---

## 📝 完整工作流程

### 示例：分析工业设备数据

**步骤1：配置协议**
```
1. 进入"协议配置" Tab
2. 设置协议名称："工业设备协议"
3. 设置帧头：68
4. 设置帧尾：16
5. 添加字段：
   - 设备地址 (1字节, uint8)
   - 命令码 (1字节, uint8)
   - 数据长度 (1字节, uint8)
   - 数据内容 (N字节, bytes)
6. 配置校验：SUM, 位置在帧尾前
```

**步骤2：自定义颜色（可选）**
```
1. 进入"设置" Tab
2. 设置 uint8 为绿色（地址、命令码）
3. 设置 bytes 为黄色（数据内容）
```

**步骤3：输入数据**
```
1. 进入"数据分析" Tab
2. 在输入框输入：
   68 01 83 05 11 22 33 44 55 E0 16
```

**步骤4：分析**
```
1. 点击"开始分析"
2. 查看统计：总帧数、有效帧、错误帧
3. 点击表格中的帧，查看详细信息
4. 字段以配置的颜色显示
```

**步骤5：查看历史**
```
1. 点击"查看历史记录"
2. 看到刚才的分析记录
3. 可随时回顾
```

---

## ❓ 常见问题

### Q1: 颜色配置不生效？
**A:** 需要重新分析数据才能看到新的颜色效果。

### Q2: 历史记录太多怎么办？
**A:** 
- 系统自动保留最近20条
- 可手动点击"清空历史"删除所有记录

### Q3: 如何恢复默认设置？
**A:** 
- 颜色：点击"恢复默认颜色"
- 历史：点击"清空历史记录"
- 或者删除 `~/.serialdatacompare/` 目录

### Q4: 下拉框显示不正常？
**A:** 
- 确保双击单元格触发编辑
- 如果仍有问题，尝试重启程序

---

## 📞 反馈与支持

如有问题或建议，请：
1. 查看详细文档：`document/v1.3.0_完整功能实现_20251101.md`
2. 运行测试脚本：`./test_v1.3.0.sh`
3. 检查日志输出

---

## 🎯 版本信息

- **版本号：** v1.3.0
- **发布日期：** 2025-11-01
- **主要更新：** 字段类型下拉、彩色显示、分析历史
- **测试状态：** ✅ 全部通过

---

享受你的数据分析之旅！ 🚀
